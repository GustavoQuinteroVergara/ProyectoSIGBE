<app-navbar></app-navbar>
<div class="wrap containerForm" style="overflow-x: hidden;">

  <ng-template #mytemplate>
    <div *ngIf="success" class="dialogSuccess">
      <i class="icofont-ui-check text-center iconSuccessRegister"></i>
      <h2 class="text-center textoSuccess">Registro exitoso (espere activación de bienestar)</h2>
    </div>
    <div *ngIf="!success" class="dialogSuccess">
      <i class="icofont-close-circled text-center iconErrRegister"></i>
      <h2 class="text-center textoSuccess">Error al registrar</h2>
    </div>
  </ng-template>

  <ng-template #emailexistente>
    <div *ngIf="!success" class="dialogSuccess">
      <i class="icofont-close-circled text-center iconErrRegister"></i>
      <h2 class="text-center textoSuccess">Error, ya existe una cuenta con ese correo</h2>
    </div>
  </ng-template>
  <div class="imagelogin" data-aos="fade-right" data-aos-once="true">

  </div>

  <div class="row rowloginn cup1" data-aos="fade-down" data-aos-once="true"> 
    <div class="formtiq" >
    <form [formGroup]="formulariologin"class="col-lg rowform">
      <div>
        <h1 class="text-center">REGISTRO ESTUDIANTIL </h1>
      </div>
      <div class="row"> 
        <div class="input-field col-lg col-sm col-md col-xl">

          <h4>Identificación</h4>
          <mat-form-field appearance="fill" class="example-full-width">
            <mat-label>Identificación</mat-label>
            <input matInput formControlName="identificacion" pattern="^[0-9]+"  maxlength="10" #identificacion type="text"  id="identificacion">
            <i matSuffix class="icofont-id iconito"></i>
          </mat-form-field>
          <div *ngIf="formulariologin.get('identificacion').errors && formulariologin.get('identificacion').dirty">
            <mat-error *ngIf="formulariologin.get('identificacion').hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="formulariologin.get('identificacion').hasError('minlength')"><br>Se debe ingresar mÍnimo 6 caracteres</mat-error>
            <mat-error *ngIf="formulariologin.get('identificacion').hasError('pattern')"><br>Solo números</mat-error>
          </div>
        </div> 

        <div class="input-field col-lg col-sm col-md col-xl">

          <h4>Nombre</h4>
          <mat-form-field appearance="fill" class="example-full-width">
            <mat-label>Nombre</mat-label>
            <input matInput formControlName="nombre" #nombre id="first_name" type="text" class="validate">
            <i  matSuffix class="icofont-id iconito"></i>
          </mat-form-field>
          <div *ngIf="formulariologin.get('nombre').errors && formulariologin.get('nombre').dirty">
            <mat-error *ngIf="formulariologin.get('nombre').hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="formulariologin.get('nombre').hasError('minlength')">Se debe ingresar mínimo 3 caracteres</mat-error>
            <mat-error *ngIf="formulariologin.get('nombre').hasError('pattern')">Solo letras</mat-error>
          </div>
        </div>
        <div class="input-field col-lg col-sm col-md col-xl">
          <h4>Apellido</h4>
          <mat-form-field appearance="fill" class="example-full-width">
            <mat-label>Apellido</mat-label>
            <input matInput formControlName="apellido" #apellido id="last_name" type="text" class="validate">
            <i matSuffix class="icofont-id iconito"></i>
          </mat-form-field>
          <div *ngIf="formulariologin.get('apellido').errors && formulariologin.get('apellido').dirty">
            <mat-error *ngIf="formulariologin.get('apellido').hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="formulariologin.get('apellido').hasError('minlength')"><br>Se debe ingresar mínimo 3 caracteres</mat-error>
            <mat-error *ngIf="formulariologin.get('apellido').hasError('pattern')"><br>Solo letras</mat-error>
          </div>
        </div>
                <div class="input-field col-lg col-sm col-md col-xl">
          <h4>Dirección</h4>
          <mat-form-field appearance="fill" class="example-full-width">
            <mat-label>Dirección</mat-label>
            <input matInput formControlName="direccion" #direccion id="direccion" type="text" class="validate">
            <i matSuffix class="icofont-id iconito"></i>
          </mat-form-field>
          <div *ngIf="formulariologin.get('direccion').errors && formulariologin.get('direccion').dirty">
            <mat-error *ngIf="formulariologin.get('direccion').hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="formulariologin.get('direccion').hasError('minlength')"><br>Se debe ingresar mínimo 3 caracteres</mat-error>
            <mat-error *ngIf="formulariologin.get('direccion').hasError('pattern')"><br>Solo letras</mat-error>
          </div>
        </div>

        
      </div>
      <div class="row divInputssrow">
        <div class="col-lg col-sm col-md col-xl">
          <h4>Estrato</h4>
          <mat-form-field appearance="fill" class="example-full-width">
            <mat-label>Estrato </mat-label>
            <mat-select #estrato>
              <mat-option value="1">
                1
              </mat-option>
              <mat-option value="2">
                2
              </mat-option>
              <mat-option value="3">
                3
              </mat-option>
              <mat-option value="4">
                4
              </mat-option>
              <mat-option value="5">
                5
              </mat-option>
              <mat-option value="6">
                6
              </mat-option>

            </mat-select>
          </mat-form-field>
          </div>
          <div class="col-lg col-sm col-md col-xl">
            <h4>Fecha de nacimiento</h4>
            <mat-form-field appearance="fill" class="example-full-width">
              <mat-label>Fecha de nacimiento</mat-label>
              <input matInput #fechanacimiento [matDatepicker]="picker">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div>
      </div>
          <div class="row divInputssrow">
          <div class="col-lg col-sm col-md col-xl">
            <h4>Zona residencial</h4>
            <mat-form-field appearance="fill" class="example-full-width">
              <mat-label>Zona residencial </mat-label>
              <mat-select #zonaresidencial>
                <mat-option value="Rural">
                  Rural
                </mat-option>
                <mat-option value="Urbana">
                  Urbana
                </mat-option>
               
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-lg col-sm col-md col-xl">
            <h4>Asignar Rol</h4>
              <mat-form-field appearance="fill" class="example-full-width">
              <mat-label>Seleccione un rol</mat-label>
              <mat-select #rol (selectionChange)="departamentoselec($event.value)">
              <mat-option *ngFor="let rol of roles" [value]="rol.IdRol">{{rol.descripcion}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
          </div>
          <div class="row divInputssrow">
        <div class="col-lg col-sm col-md col-xl">
                  <h4>Departamento</h4>
            <mat-form-field appearance="fill" class="example-full-width">
              <mat-label>Selecciona departamento</mat-label>
              <mat-select #departamento (selectionChange)="departamentoselec($event.value)">
                <mat-option *ngFor="let depar of departamentos" [value]="depar.iddepartamento">{{depar.nombre}}</mat-option>
                
              </mat-select>
            </mat-form-field>
          </div>
         <div class="col-lg col-sm col-md col-xl">
            <h4>Ciudad</h4>
            <mat-form-field appearance="fill" class="example-full-width">
              <mat-label>Selecciona la ciudad</mat-label>
              <mat-select #ciudad>
                <mat-option *ngFor="let ciudad of ciud" [value]="ciudad.idciudad">{{ciudad.nombre}}</mat-option>
                
              </mat-select>
            </mat-form-field>
        </div>
          </div>

      <div class="row divInputssrow">
        <div class="input-field col-lg col-sm col-md col-xl">
          <h4>Email</h4>
          <mat-form-field appearance="fill" class="example-full-width">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" #email pattern="[a-z]+.+[a-z]@correounivalle.edu.co" id="email" type="email" class="validate">
            <i matSuffix class="icofont-email iconito "></i>
          </mat-form-field>
          <div *ngIf="formulariologin.get('email').errors && formulariologin.get('email').dirty">
            <mat-error *ngIf="formulariologin.get('email').hasError('email')"><br>El correo no es válido</mat-error>
            <mat-error *ngIf="formulariologin.get('email').hasError('pattern')"><br>Debe tener correo univalle</mat-error>
            <mat-error *ngIf="formulariologin.get('email').hasError('required')">Este campo es obligatoria</mat-error>
          </div>
        </div>
        <div class="input-field col-lg col-sm col-md col-xl">
          <h4>Contraseña</h4>
          <mat-form-field appearance="fill" class="example-full-width">
            <mat-label>Contraseña</mat-label>
            <input matInput #contrasena formControlName="contrasena" id="password" type="password" class="validate">
            <i matSuffix class="icofont-key iconocontrasenas"></i>
          </mat-form-field>
          <div *ngIf="formulariologin.get('contrasena').errors && formulariologin.get('contrasena').dirty">
            <mat-error *ngIf="formulariologin.get('contrasena').hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="formulariologin.get('contrasena').hasError('minlength')"><br>Se debe ingresar mínimo 7 caracteres</mat-error>
          
          </div>
        </div>
        <div class="col-lg col-sm col-md col-xl">
          <h4>Seleccione su carrera</h4>
          <mat-form-field appearance="fill" class="example-full-width">
            <mat-label>Selecciona su carrera</mat-label>
            <mat-select #carrera>
              <mat-option *ngFor="let carrer of carreras" [value]="carrer.codigocarrera">{{carrer.nombre_carrera}}</mat-option>
              
            </mat-select>
          </mat-form-field>
        </div>
        <div class="input-field col-lg col-sm col-md col-xl">
          <h4>Código estudiante</h4>
          <mat-form-field appearance="fill" class="example-full-width">
            <mat-label>Código estudiante</mat-label>
            <input matInput #codigo formControlName="codigo" pattern="^[0-9]+" id="codigo" type="text" class="validate">
            <i matSuffix class="icofont-graduate iconito"></i>
          </mat-form-field>
          <div *ngIf="formulariologin.get('codigo').errors && formulariologin.get('codigo').dirty">
            <mat-error *ngIf="formulariologin.get('codigo').hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="formulariologin.get('codigo').hasError('minlength')">Se debe ingresar mínimo 5 caracteres </mat-error>
            <mat-error *ngIf="formulariologin.get('codigo').hasError('pattern')"> <br>Solo números</mat-error>
          </div>
        </div>
      </div>  
     <div class="row ">
          <div class="col-lg col-sm col-md col-xl ">
              <mat-checkbox formControlName="acceptTerms" color="warn" class="example-margin"> </mat-checkbox>
              <p> Acepto el tratamiento de datos, de acuerdo a lo estipulado en la ley 1581 de 2012.</p>
              <div *ngIf="formulariologin.get('acceptTerms').errors && formulariologin.get('acceptTerms').dirty">
                <mat-error *ngIf="formulariologin.get('acceptTerms').hasError('required')">Debes aceptar el tratamiento de datos.</mat-error>
              </div>
          </div>
      </div>

      <div class="row center" style="text-align: center;float: unset; display: flex;" >
        <div class="input-field col-lg col-sm col-md col-xl" *ngIf="formulariologin.invalid">
          <a mat-raised-button color="primary" [disabled]="formulariologin.invalid" >Registrar</a>
        </div>
        <div class="input-field col s12 col-sm col-md col-xl" *ngIf="!formulariologin.invalid">
          <a (click)="registrouser(identificacion.value,nombre.value,apellido.value,direccion.value,email.value,contrasena.value,1,'Inactivo',zonaresidencial.value,ciudad.value,fechanacimiento.value,estrato.value,codigo.value,carrera.value,mytemplate,emailexistente)" mat-raised-button color="primary" >Registrar</a>
        </div>
       </div>
     </form>
    </div>
  </div>
</div>

<!--<div class="cuerpopage cup1" data-aos="fade-down" data-aos-once="true"> 
  <div class="formtiq">
    <h1>REGISTRO ESTUDIANTIL</h1>
    <hr>
    <form [formGroup]="formulariologin" novalidate>

      <div class="row "> 
        <div class="col-6">
          <h4>Identificación</h4>
          <mat-form-field appearance="fill">
            <mat-label>Identificación</mat-label>
            <input matInput pattern="^[0-9]+"  maxlength="10" #identificacion formControlName="identificación" type="text"  id="identificacion">
          </mat-form-field>
          <div *ngIf="formulariologin.get('identificacion').errors && formulariologin.get('identificacion').dirty">
           <mat-error *ngIf="formulariologin.get('identificacion').hasError('required')">Este campo es obligatorio</mat-error>
           <mat-error *ngIf="formulariologin.get('identificacion').hasError('minlength')"><br>Se debe ingresar mínimo 6 caracteres</mat-error>
           <mat-error *ngIf="formulariologin.get('identificacion').hasError('pattern')"><br>Solo numeros</mat-error>


         </div>
       </div> 
       <div class="col-6">
        <h4>Código estudiante</h4>
        <mat-form-field appearance="fill">
          <mat-label>Código estudiante</mat-label>
          <input matInput #codigo formControlName="codigo" pattern="^[0-9]+"  id="codigo" type="text" class="validate">
        </mat-form-field>

        <div *ngIf="formulariologin.get('codigo').errors && formulariologin.get('codigo').dirty">
          <mat-error *ngIf="formulariologin.get('codigo').hasError('required')">Este campo es obligatorio</mat-error>
          <mat-error *ngIf="formulariologin.get('codigo').hasError('minlength')">Se debe ingresar mínimo 5 caracteres </mat-error>
          <mat-error *ngIf="formulariologin.get('codigo').hasError('pattern')"> <br>Solo numeros</mat-error>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <h4>Nombre</h4>
        <mat-form-field appearance="fill">
          <mat-label>Nombre</mat-label>
          <input matInput #nombre formControlName="nombre"id="first_name" type="text" class="validate">
        </mat-form-field>
        <div *ngIf="formulariologin.get('nombre').errors && formulariologin.get('nombre').dirty">
          <mat-error *ngIf="formulariologin.get('nombre').hasError('required')">Este campo es obligatorio</mat-error>
          <mat-error *ngIf="formulariologin.get('nombre').hasError('minlength')">Se debe ingresar mínimo 3 caracteres</mat-error>
          <mat-error *ngIf="formulariologin.get('nombre').hasError('pattern')">Solo letras</mat-error>
        </div>



        

      </div>
      <div class="col-6">

        <h4>Apellido</h4>
        <mat-form-field appearance="fill">
          <mat-label>Apellido</mat-label>
          <input matInput #apellido formControlName="apellido"  id="last_name" type="text" class="validate">
        </mat-form-field>

        <div *ngIf="formulariologin.get('apellido').errors && formulariologin.get('apellido').dirty">
          <mat-error *ngIf="formulariologin.get('apellido').hasError('required')">Este campo es obligatorio</mat-error>
          <mat-error *ngIf="formulariologin.get('apellido').hasError('minlength')"><br>Se debe ingresar mínimo 3 caracteres</mat-error>
          <mat-error *ngIf="formulariologin.get('apellido').hasError('pattern')"><br>Solo letras</mat-error>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-6">

        <h4>Email</h4>
        <mat-form-field appearance="fill">
          <mat-label>Email</mat-label>
          <input matInput #email formControlName="email" pattern="[a-z]+.+[a-z]+@correounivalle.edu.co" id="email" type="email" class="validate">
        </mat-form-field>
        <div *ngIf="formulariologin.get('email').errors && formulariologin.get('email').dirty">
          <mat-error *ngIf="formulariologin.get('email').hasError('email')"><br>El correo no es válido</mat-error>
          <mat-error *ngIf="formulariologin.get('email').hasError('pattern')"><br>Debe tener un correo univalle</mat-error>
          <mat-error *ngIf="formulariologin.get('email').hasError('required')">Este campo es obligatoria</mat-error>
        </div>
      </div>

      <div class="col-6">

        <h4>Contraseña</h4>
        <mat-form-field appearance="fill">
          <mat-label>Contraseña</mat-label>
          <input matInput #contrasena formControlName="contrasena" id="password" type="password" class="validate">
        </mat-form-field>
        <div *ngIf="formulariologin.get('contrasena').errors && formulariologin.get('contrasena').dirty">
          <mat-error *ngIf="formulariologin.get('contrasena').hasError('required')">Este campo es obligatorio</mat-error>
          <mat-error *ngIf="formulariologin.get('contrasena').hasError('minlength')"><br>Se debe ingresar mínimo 7 caracteres</mat-error>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">

        <h4>Rol</h4>
        <mat-form-field appearance="fill">
          <mat-label>Rol</mat-label>
          <input matInput maxlength="1" #roles id="rol" disabled="true" formControlName="rol" type="text" class="validate" value="1" placeholder="Estudiante">
        </mat-form-field>

        <div *ngIf="formulariologin.get('rol').errors && formulariologin.get('rol').dirty">
          <mat-error *ngIf="formulariologin.get('rol').hasError('required')">Este campo es obligatorio</mat-error>
          <mat-error *ngIf="formulariologin.get('rol').hasError('maxlength')">1 Solo carácter</mat-error>
        </div>
      </div>
    </div>
    
    <div>
      <div class="row text-center" >
        <div class="col-12">
          <a mat-raised-button color="primary"  [class.disabled]="!formulariologin.valid" (click)="registrouser(identificacion.value,nombre.value,apellido.value,email.value,codigo.value,contrasena.value,roles.value,'Activo')" >Registrar</a>
        </div>
      </div>
    </div>
  </form>
</div>
</div>-->
