<app-navbar></app-navbar>

<ng-template #entrevistaPostu>

      <a (click)="descargarPDFEntrevista()" mat-stroked-button><img src="assets/imgs/icopdf.png" alt="icopdf" width="40px">Descargar como PDF</a>
</ng-template>


<ng-template #visitaPostu>
  <div>
    <h1>Visita domiciliaria</h1>
    <a (click)="descargarPDFVisita(visitaPostuFound)" style="cursor: pointer;"><img src="assets/imgs/icopdf.png" alt="icopdf" width="40px">Descargar como PDF</a>
  </div>
  <hr>
  <div id="visitaListar" #visitarListar>
  <div class="row">
    Codigo Visita: {{visitaPostuFound.idvisita}}
  </div>
  <hr>
  <div class="row">
    Codigo postulación: {{visitaPostuFound.postulacionid}}
  </div>
  <hr>
  <div class="row">
    Estamento: {{visitaPostuFound.estamento}}
  </div>
  <hr>
  <div class="row">
    Nombre barrio: {{visitaPostuFound.barrio}}
  </div>
  <hr>
  <div class="row">
    Comuna: {{visitaPostuFound.comuna}}
  </div>
  <hr>
  <div class="row">
    Nombre del que atendio: {{visitaPostuFound.nombreatencion}}
  </div>
  <hr>
  <div class="row">
    Parentesco: {{visitaPostuFound.parentesco}}
  </div>
  <hr>
  <div class="row">
    Obligación: {{visitaPostuFound.obligacion}}
  </div>
  <hr>
  <div class="row">
    Cual (obligación): {{visitaPostuFound.cualobligacion}}
  </div>
  <hr>
  <div class="row">
    Estrato DANE: {{visitaPostuFound.estratodane}}
  </div>
  <hr>
  <hr>
  <div class="row">
    ¿Paga arriendo?: {{visitaPostuFound.pagoarriendo}}
  </div>
  <hr>
  <div class="row">
    Valor del arriendo: {{visitaPostuFound.valorarriendo}}
  </div>
  <hr>
  <div class="row">
    Que cubre arriendo: {{visitaPostuFound.cubrearriendo}}
  </div>
  <hr>
  <div class="row">
    Otro (Arriendo) : {{visitaPostuFound.otroarriendo}}
  </div>
  <hr>
  <div class="row">
    Fuente de ingreso: {{visitaPostuFound.fuenteingreso}}
  </div>
  <hr>
  <div class="row">
    Cual (Fuente de ingreso): {{visitaPostuFound.cualfuente}}
  </div>
  <hr>
  <div class="row">
    Tipo de vivienda: {{visitaPostuFound.tipocasa}}
  </div>
  <hr>
  <div class="row">
    Apecto de la vivienda: {{visitaPostuFound.aspectocasa}}
  </div>
  <hr>
  <div class="row">
    Cual (Aspecto vivienda): {{visitaPostuFound.cualaspecto}}
  </div>
  <hr>
  <div class="row">
    Servicio publico: {{visitaPostuFound.serviciopublico}}
  </div>
  <hr>
  <div class="row">
    Cuarto del solicitante: {{visitaPostuFound.cuartosolicitante}}
  </div>
  <hr>
  <div class="row">
    Cantidad de personas en la vivienda: {{visitaPostuFound.cantidadpersonas}}
  </div>
  <hr>
  <div class="row">
    Descripción final: {{visitaPostuFound.descripcionfinal}}
  </div>
  </div>
</ng-template>

<ng-template #templateverpostulacion>

  <ng-template #successactualizacion>
    <div  class="dialogSuccess" >
      <i class="icofont-ui-check text-center iconSuccessRegister"></i>
      <h4 class="text-center textoSuccess">Actualizado exitosamente</h4>
    </div>
  </ng-template>
  <div class="row" data-aos="fade-down" data-aos-once="true">
    <div class="col-12 text-center">
      <h2>Estado postulación</h2>
    </div>
<!-- COMIENZO COPIADA -->
<div class="pasosestados">
  <div class="paso mrpaso" [ngClass]="circlecolor1">
    <div class="circulopaso">
      <i class="icofont-clock-time iconSearchUser"></i>
    </div>
    <p>En espera</p>
  </div>
  <div class="paso pasoline2 mrpaso" [ngClass]="circlecolor2">
    <div class="circulopaso">
      <i class="icofont-tasks iconSearchUser"></i>
    </div>
    <p>Revisión</p>
  </div>
  <div class="paso pasoline3 mrpaso" [ngClass]="circlecolor3">
    <div class="circulopaso">
      <i class="icofont-address-book iconSearchUser"></i>
    </div>
    <p>Entrevista</p>
  </div>
  <div class="paso pasoline4 mrpaso4" [ngClass]="circlecolor4">
    <div class="circulopaso">
      <i class="icofont-home iconSearchUser"></i>
    </div>
    <p>Visita Domiciliaria</p>
  </div>
  <div class="paso pasoline5" [ngClass]="circlecolor5">
    <div class="circulopaso">
      <i *ngIf="estadopostusel == 1" class="icofont-check-circled iconSearchUser"></i>
      <i *ngIf="estadopostusel == 2" class="icofont-close-circled iconSearchUser"></i>
      <i *ngIf="estadopostusel != 1 && estadopostusel != 2 " class="icofont-spinner iconSearchUser"></i>
    </div>
    <p>Estado final</p>
  </div>
</div>
<div class="infopostusel">
  <div class="row">
  <mat-tab-group mat-align-tabs="start" animationDuration="0ms">
  <mat-tab label="Información postulación" data-aos="fade-down" data-aos-once="true">
    <div class="tabinfopostu">
       <div class="row">
      <div class="col-6">
        <strong>{{postuseltable.consecutivo_postulacion}}</strong> 
        <p>Código postulación : </p>   
        <hr>
        
      </div>
      <div class="col-6">
        <strong>{{postuseltable.fechapostulacion}}</strong>
        <p>Fecha postulación : </p>
        <hr>
        
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <strong>{{postuseltable.estudiante.nombreestudiante}}</strong>
        <p>Nombre estudiante :</p>
        <hr>
         
      </div>
      <div class="col-6">
        <strong>{{postuseltable.estudiante.identificacion}}</strong>
        <p>Identificacición : </p>
        <hr>
        
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <strong>{{postuseltable.semestre}}</strong>
        <p>Semestre : </p>
        <hr>
        
      </div>
      <div class="col-6">
        <strong>{{postuseltable.estrato}}</strong>
        <p>Estrato : </p>
        <hr>
        
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <strong>{{postuseltable.codigoestudiante}}</strong>
        <p>Codigo estudiante : </p>
        <hr>
      </div>
      <div class="col-6">
          <strong>{{postuseltable.carrera}}</strong>
          <p>Carrera : </p>          
        <hr>
      </div>
    </div>
    <div class="col-12">
    <div class="row">
      <div class="col-lg">
            <strong>{{postuseltable.promedio}}</strong>
            <p>Promedio : </p>
      </div>
      <div class="col-lg">
            <form>
              <p>¿Cumple o no cumple el promedio?</p>
              <div class="col-lg" *ngIf="estadopostusel != 4">
                <mat-radio-group  aria-label="Cumple o no cumple" >
                  <mat-radio-button #text1 value="1" color="warn"  [disabled]="estadopostusel != 4"  [checked]="postuseltable.estadopromedio == 1"><i class="icofont-check-circled" style="font-size: 20px;"></i></mat-radio-button>
                  <mat-radio-button #checkdos value="2" color="warn" [disabled]="estadopostusel != 4" [checked]="postuseltable.estadopromedio == 2"><i class="icofont-close-circled" style="font-size: 20px;"></i></mat-radio-button>
                </mat-radio-group>
              </div>
              <div class="col-lg" *ngIf="estadopostusel == 4">
                <mat-radio-group  aria-label="Cumple o no cumple" >
                  <mat-radio-button #text1 value="1" color="warn" (change)="updateEstadoPromedio(text1.value)" [checked]="postuseltable.estadopromedio == 1"><i class="icofont-check-circled" style="font-size: 20px;"></i></mat-radio-button>
                  <mat-radio-button #checkdos value="2" color="warn" (change)="updateEstadoPromedio(checkdos.value)" [checked]="postuseltable.estadopromedio == 2"><i class="icofont-close-circled" style="font-size: 20px;"></i></mat-radio-button>
                </mat-radio-group>
              </div>
            </form>
          </div>
    </div>
    </div>
    <hr>
  </div>
  </mat-tab>
  <mat-tab label="Documentos" *ngIf="estadopostusel != 3" data-aos="fade-down" data-aos-once="true">
    <div class="tabinfopostu ">
      <div class="row">
        <div class="col-lg" *ngFor="let docspostu of documentosFoundpostu">
          <a (click)="downloadPDF(docspostu.archivo,docspostu.nombredoc)" class="buttonsdownloaddoc"><img src="assets/imgs/icopdf.png" alt="icopdf" width="40px">{{docspostu.nombredoc}}</a>
          <hr>
          <div class="checkboxs">
            <mat-radio-group  aria-label="Selecciona si un documento esta correcto" >
              <mat-radio-button #text1 value="1" color="warn" [disabled]="estadopostusel != 4" (change)="checkboxEstados(docspostu.concecutivodoc,text1.value )" [checked]="docspostu.estado == 1">Bien diligenciado</mat-radio-button>
              <mat-radio-button #checkdos value="2" color="warn" [disabled]="estadopostusel != 4" (change)="checkboxEstados(docspostu.concecutivodoc,checkdos.value )" [checked]="docspostu.estado == 2">Mal diligenciado</mat-radio-button>
            </mat-radio-group>
          </div>
        </div>
      </div>
      <div class="row mt-4">
        <div class="col-12">
          <mat-form-field class="example-full-width" appearance="fill" class="inputsEspacio" style="width: 100%;">
            <mat-label>Observación</mat-label>
            <textarea [(ngModel)]="observacion" [ngModelOptions]="{standalone: true}" matInput placeholder="Contenido" [disabled]="estadopostusel != 4"></textarea>
          </mat-form-field>
        </div>
      </div>  
      <div class="row mb-4">
        <div class="col-12" style="text-align: center;" *ngIf="estadopostusel == 4">
          <a mat-raised-button (click)="actualizarEstadoPostulacion(successactualizacion)">Actualizar estado documentos</a>
          <hr>
        </div>
         <div class="col-12" style="text-align: center;" *ngIf="estadopostusel != 4">
          <a mat-raised-button [disabled]="estadopostusel != 4">Actualizar estado documentos</a>
          <hr>
        </div>
      </div>
    </div>


  </mat-tab>
    <mat-tab label="Entrevista" *ngIf="estadopostusel != 3 && estadopostusel != 4" data-aos="fade-down" data-aos-once="true">
      <div class="tabinfopostu mb-4">
        <div class="row">
          <h1>Entrevista</h1>
          <hr>
          <a mat-stroked-button color="primary" *ngIf="!entrevistvalidate" [routerLink]="['/entrevista', postuseltable.consecutivo_postulacion,$idConvo]">Iniciar entrevista</a>
          <a mat-stroked-button color="primary" *ngIf="entrevistvalidate" (click)="verEntrevistaModal(entrevistaPostu)">Ver entrevista</a>
        </div>
    </div>
  </mat-tab>
  <mat-tab label="Visita" *ngIf="estadopostusel != 3 && estadopostusel != 4 && estadopostusel != 5" data-aos="fade-down" data-aos-once="true">
    <div class="tabinfopostu mb-4">
      <div class="row">
        <h1>Visita</h1>
        <hr>
        <a mat-raised-button color="primary" class="mb-4" *ngIf="!visitavalidate" [routerLink]="['/visitadomiciliariaconvo', postuseltable.consecutivo_postulacion,$idConvo]">Iniciar visita domiciliaria</a>
        <a mat-raised-button color="primary" *ngIf="visitavalidate" (click)="verVisitaModal(visitaPostu)">Ver visita domiciliaria</a>
      </div>
    </div>
  </mat-tab>
</mat-tab-group>
 </div>
  <div class="row">

    <div class="buttonestados col-12">
        <img src="assets/imgs/loading.gif" *ngIf="loadingcc" alt="Cargando.." width="60px">
      <div *ngIf="estadopostusel == 3 && $nombreusuario.rol == '2'"> <!-- en espera -->
        <button mat-raised-button color="primary" style="background-color:#2d8230;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Revision')" class="buttonsiguiente">Revisión<i class="icofont-rounded-right"></i></button>
      </div>
      <div *ngIf="estadopostusel == 4 && $nombreusuario.rol == '2'" style="text-align: center;"> <!-- Revision -->
        <button mat-flat-button color="primary" style="background-color: rgba(0,0,0,.12);color: black;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'En espera')" class="buttonanterior"><i class="icofont-rounded-left"></i>En espera</button>
        <button mat-raised-button color="primary" style="background-color:#2d8230;"  (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Entrevista')" class="buttonsiguiente">Entrevista<i class="icofont-rounded-right"></i></button>
        <button mat-stroked-button color="primary" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Aprobado')" style="margin-right: 20px;font-weight: bolder;color:#357b38;" class="buttonmedio">Aprobado</button>
        <button mat-stroked-button color="warn" style="font-weight: bolder;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Rechazado')" class="buttonmedio">Rechazado</button>
      </div>
      <div *ngIf="estadopostusel == 5"> <!-- Entrevista -->
        <button mat-flat-button color="primary" style="background-color: rgba(0,0,0,.12);color: black;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Revision')" *ngIf="$nombreusuario.rol == '2'" class="buttonanterior"><i class="icofont-rounded-left"></i>Revision</button>
        <button mat-raised-button color="primary" style="background-color:#2d8230;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Visita')" class="buttonsiguiente">Visita<i class="icofont-rounded-right"></i></button>
      </div>
      <div *ngIf="estadopostusel == 6" style="text-align: center;"><!-- Visita -->
        <button mat-flat-button color="primary" style="background-color: rgba(0,0,0,.12);color: black;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Entrevista')" class="buttonanterior"><i class="icofont-rounded-left"></i>Entrevista</button>
        <button mat-stroked-button color="primary" *ngIf="$nombreusuario.rol == '2'" style="font-weight: bolder;color:#357b38; margin-right: 20px;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Aprobado')" class="buttonmedio ">Aprobado</button>
        <button mat-stroked-button color="warn" *ngIf="$nombreusuario.rol == '2'" style="margin-right: 20px;font-weight: bolder;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Rechazado')" class="buttonmedio">Rechazado</button>
      </div>
      <div *ngIf="estadopostusel == 1 && $nombreusuario.rol == '2'" style="text-align: center;">  <!-- Aprobado -->
        <button mat-flat-button color="primary" style="background-color: rgba(0,0,0,.12);color: black;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Visita')" class="buttonanterior"><i class="icofont-rounded-left"></i>Visita</button>
        <button mat-stroked-button color="warn" style="font-weight: bolder;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Rechazado')" class="buttonmedio">Rechazado</button>
      </div>
      <div *ngIf="estadopostusel == 2 && $nombreusuario.rol == '2'" style="text-align: center;"> <!-- Rechazado -->
        <button mat-flat-button color="primary" style="background-color: rgba(0,0,0,.12);color: black;" (click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Visita')" class="buttonanterior"><i class="icofont-rounded-left"></i>Visita</button>
        <button mat-stroked-button color="primary"  style="font-weight: bolder;color:#357b38;"(click)="cambiarEstadoPostu(postuseltable.consecutivo_postulacion,postuseltable.estado_postulacion,'Aprobado')" class="buttonmedio">Aprobar</button>
      </div>
    </div><!-- fin -->
  </div>

</div>

<!-- FIN COPIADA -->
  </div>
</ng-template>



<ng-template #mytemplate>
  <div >
    <form>
      <h1>Información Estudiante
      </h1>
      <hr>

      <div class="row">
        <div class="col-6">
          <mat-form-field class="example-full-width" disabled appearance="none">
            <mat-label>Identificación</mat-label>
            <input #beca id="identificacionest" matInput placeholder="cupos" disabled [value]="postulacionesest[0].estudiante.identificacion">
          </mat-form-field>
        </div>
        
      </div>
      <div class="row">
        <div class="col-12">

          <mat-form-field class="example-full-width" disabled appearance="none">
            <mat-label>Correo electrónico</mat-label>
            <input #beca id="correoest" matInput placeholder="cupos" disabled [value]="postulacionesest[0].estudiante.correoest">
          </mat-form-field>
        </div>
      </div>
    </form>
    <h1>Postulaciones Realizadas</h1>
    <div class="row">
      <div class="col-12 m-12 text-center">
        <div class ="container" style="padding-bottom:20px">
          <button mat-raised-button color="warning" (click)="exportAsXLSX2()">Exportar a Excel</button>
          <!--<button mat-raised-button color="accent">Accent</button>-->
        </div>
      </div>
    </div>
    <table class="table table-bordered table-striped mb-0">
      <thead>
        <tr>
          <th>Fecha postulación</th>
          <th>Tipo beca</th>
          <th>Estado</th>
          <th>Semestre</th>
          <th>Estrato registrado</th>
        </tr>
      </thead>

      <tbody *ngFor="let postu of postulacionesest">
        <tr>
          <td>{{postu.fechapostulacion}}</td>
          <td>{{postu.nombreConv}}</td>
          <td>{{postu.estado_postulacion}}</td>
          <td>{{postu.semestre}}</td>
          <td>{{postu.estrato}}</td>
        </tr>
      </tbody>
    </table>
    <!--<div class="row">
      <div class="col-10 m-4 text-center">
        <button mat-raised-button color="primary">Generar informe estudiante</button>
      </div>
    </div>-->

  </div>
</ng-template>
<div class="cuerpopage cup1" data-aos="fade-down" data-aos-once="true">
  <div class="formtiqConvo ">
    <div class="container-fluid">
      <button mat-icon-button color="primary"  [routerLink]="['/listarConvocatoria']" aria-label="Example icon button with a home icon">
        <i class="icofont-rounded-left" style="color:#f44336 !important;font-size: 20px;"></i>
        <span style="color: black !important;">Regresar</span>
      </button>
      <div class="row">
        <form [formGroup]="formularioConvocatoria" *ngIf="loading">
          <div>
            <hr>
            <h1>
              Información Convocatoria
              <div class="botonEditarForm">
                <a (click)="activeFormActualizar()" data-title="Editar convocatoria" *ngIf="$nombreusuario.rol == '2'"><i class="icofont-ui-edit iconSearchUser"></i></a>
              </div>
            </h1>
            <hr>
            <div class="row" style="font-weight: bolder;">
              <div class="col-12 row">
                <div class="col-6">
                  <h4 style="font-weight: bolder;">Codigo de convocatoria</h4>
                  <mat-form-field class="example-full-width"  appearance="fill">
                    <mat-label>Consecutivo Convocatoria</mat-label>
                    <input #consecutivo_convocatoria disabled style="font-weight: bolder;" id="consecutivo" matInput placeholder="consecutivo" [value]="$convoBuscada.consecutivo_convocatoria">
                  </mat-form-field>
                </div>
                <div class="col-6">
                  <h4 style="font-weight: bolder;">Cantidad de cupos asignados</h4>
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>Cantidad de Cupos</mat-label>
                    <input #cupo matInput style="font-weight: bolder;" id="cupos" [disabled]="disabledActualizar"  placeholder="cupos" [value]="$convoBuscada.cupo">
<!--                     <mat-error class="help-block form-error text-danger small" *ngIf="formularioConvocatoria.controls['cupo'].hasError('required') &&
                    formularioConvocatoria.controls['cupo'].touched">Por favor, escriba un número de cupos</mat-error> -->
                  </mat-form-field>
                </div>
              </div>
              <div class="col-12 row">
                <div class="col-6">
                  <h4 style="font-weight: bolder;">Beca seleccionada</h4>
                  <mat-form-field appearance="fill">
                    <mat-label>{{$convoBuscada.descbeca}}</mat-label>
                    <mat-select #becas style="font-weight: bolder;" formControlName="beca" [disabled]="disabledActualizar" required>
                      <mat-option></mat-option>
                      <mat-option *ngFor="let beca of convocatoriaBeca" [value]="beca">
                        {{beca.descripcion}}
                      </mat-option>
                    </mat-select>
                    <mat-error class="help-block form-error text-danger small" *ngIf="formularioConvocatoria.controls['beca'].hasError('required') &&
                    formularioConvocatoria.controls['beca'].touched">Por favor, seleccione una beca</mat-error>
                  </mat-form-field>
                </div>
                <div class="col-6">
                  <h4 style="font-weight: bolder;">Periodo academico de la convocatoria</h4>
                    <mat-form-field appearance="fill" style="font-weight: bolder;">
                      <mat-label>{{$convoBuscada.descperiodo}}</mat-label>
                      <mat-select #periodosacademicos [disabled]="disabledActualizar" required formControlName="periodos">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let periodos of convocatoriaPeriodo" [value]="periodos">
                          {{periodos.descripcion}}
                        </mat-option>
                      </mat-select>
                      <mat-error class="help-block form-error text-danger small" *ngIf="formularioConvocatoria.controls['periodos'].hasError('required') &&
                      formularioConvocatoria.controls['periodos'].touched">Por favor, Indique un periodo</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="col-12 row">
                <div class="col-6">
                  <h4 style="font-weight: bolder;">Fecha inicio de la convocatoria</h4>
                  <h5 style="font-weight: bolder;">Fecha actual {{$convoBuscada.fechainicio}}</h5>
                  <hr>
                  <mat-form-field appearance="fill" >
                    <input #fecha_inicio style="font-weight: bolder;" [disabled]="disabledActualizar" matInput [ngxMatDatetimePicker]="picker" placeholder="Selecciona Fecha Inicial" 
                    [value]="$convoBuscada.fechainicio" formControlName="fechaini">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>

                    <ngx-mat-datetime-picker  #picker  >
                    </ngx-mat-datetime-picker>
                    <mat-error class="help-block form-error text-danger small" *ngIf="formularioConvocatoria.controls['fechaini'].hasError('required') &&
                    formularioConvocatoria.controls['fechaini'].touched">Por favor, Indique una fecha inicio</mat-error>
                  </mat-form-field>
                </div>
                <div class="col-6">
                  <h4 style="font-weight: bolder;">Fecha fin de la convocatoria</h4>
                  <h5 style="font-weight: bolder;">Fecha actual {{$convoBuscada.fechafin}}</h5>
                  <hr>
                  <mat-form-field appearance="fill">
                    <input #fecha_fin style="font-weight: bolder;" [disabled]="disabledActualizar" matInput [ngxMatDatetimePicker]="picker2" placeholder="Selecciona Fecha final" 
                    [value]="$convoBuscada.fechafin" formControlName="fechafin">
                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>

                    <ngx-mat-datetime-picker  #picker2  >
                    </ngx-mat-datetime-picker>
                    <mat-error class="help-block form-error text-danger small" *ngIf="formularioConvocatoria.controls['fechafin'].hasError('required') &&
                    formularioConvocatoria.controls['fechafin'].touched">Por favor, Indique una fecha fin</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="col-10 row"> 
              <h4 style="font-weight: bolder;">Estado de la convocatoria</h4>               
                <mat-form-field style="float: right; font-weight: bolder;" appearance="fill">
                    <mat-label>{{$convoBuscada.estadoconvo}}</mat-label>
                    <mat-select #estado_convocatoria [disabled]="disabledActualizar" required formControlName="estado" [value]="$convoBuscada.estadoconvo">
                      <mat-option>--</mat-option>
                      <mat-option value="Activo">Activo</mat-option>
                      <mat-option value="Inactivo">Inactivo</mat-option>
                    </mat-select>
                    <mat-error class="help-block form-error text-danger small" *ngIf="formularioConvocatoria.controls['estado'].hasError('required') &&
                    formularioConvocatoria.controls['estado'].touched">Por favor, seleccione una beca</mat-error>
                  </mat-form-field>
              </div>
            </div>
                    <div *ngIf="activeButton">
                      <a mat-raised-button color="primary" disabled="true" *ngIf="!formularioConvocatoria.valid"name="action">Actualizar</a>
                      <a mat-raised-button color="primary" *ngIf="formularioConvocatoria.valid" (click)="actualizarConvocatoria
                      (consecutivo_convocatoria.value, cupo.value, becas.value,periodosacademicos.value,fecha_inicio.value,fecha_fin.value,estado_convocatoria.value,successactualizacion)" name="action">Actualizar</a>
                    </div>
                </div>


                  </form>
                </div>
                <div class="card-action">
                  <hr>
                  <h1 style="text-transform: uppercase;" *ngIf="$nombreusuario.rol == '2'">Postulaciones</h1>
                  <h1 style="text-transform: uppercase;" *ngIf="$nombreusuario.rol == '4'">Postulaciones a entrevista o Visita Domiciliaria</h1>
                  <hr>
                  <div class="col-12">
                    <h4>Digita y filtra la tabla</h4>
                    <mat-form-field class="example-full-width" style="width: 100%;" appearance="fill" class="inputsEspacio">
                          <mat-label>Digita para filtrar</mat-label>
                          <input   matInput (keyup)="applyFilter($event.target.value)">
                    </mat-form-field>
                  </div>
                  <div class="row">
                    <div class="col-12 m-12 text-center">
                      <div class ="container" style="padding-bottom:20px">
                        <button mat-raised-button color="warning" (click)="applyExportarFiltrado()">Exportar a Excel</button>
                      </div>
                    </div>
                  </div>
                <div class="table-responsive">
                  <div class="mat-elevation-z8 table-responsive">
                  <table mat-table [dataSource]="dataSource" matSort style="width: 100%;text-align: center;">

                    <!-- ID Column -->
                    <ng-container matColumnDef="estudiante.nombreestudiante">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre estudiante</th>
                      <td mat-cell *matCellDef="let row"> {{row.estudiante.nombreestudiante}} <a (click)="buscarEstPostuByIden(row.estudiante.identificacion,mytemplate)" data-title="Ver información del estudiante"><i class="icofont-address-book iconSearchUser"></i></a> </td>
                    </ng-container>

                    <!-- Progress Column -->
                    <ng-container matColumnDef="codigoestudiante">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Código Estudiante</th>
                      <td mat-cell *matCellDef="let row"> {{row.codigoestudiante}} </td>
                    </ng-container>

                    <!-- Name Column -->
                    <ng-container matColumnDef="ciudadresidencia">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Ciudad residencia</th>
                      <td mat-cell *matCellDef="let row"> {{row.ciudadresidencia}} </td>
                    </ng-container>

                    <!-- Name Column -->
                    <ng-container matColumnDef="direccionresidencia">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Direccion residencia</th>
                      <td mat-cell *matCellDef="let row"> {{row.direccionresidencia}} </td>
                    </ng-container>

                    <!-- Name Column -->
                    <ng-container matColumnDef="estrato">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Estrato</th>
                      <td mat-cell *matCellDef="let row"> {{row.estrato}} </td>
                    </ng-container>                              

                                        <!-- Color Column -->
                    <ng-container matColumnDef="carrera">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Carrera</th>
                      <td mat-cell *matCellDef="let row" > {{row.carrera}} </td>
                    </ng-container>                              

                    <!-- Color Column -->
                    <ng-container matColumnDef="promedio">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Promedio</th>
                      <td mat-cell *matCellDef="let row" > {{row.promedio}} </td>
                    </ng-container>
                                        <!-- Color Column -->
                    <ng-container matColumnDef="fechapostulacion">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha postulación</th>
                      <td mat-cell *matCellDef="let row" > {{row.fechapostulacion}} </td>
                    </ng-container>
                                        <!-- Color Column -->
                    <ng-container matColumnDef="semestre">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Semestre</th>
                      <td mat-cell *matCellDef="let row" > {{row.semestre}} </td>
                    </ng-container>

                                        <!-- Color Column -->
                    <ng-container matColumnDef="estado_postulacion">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
                      <td mat-cell *matCellDef="let row" > {{row.estado_postulacion}} </td>
                    </ng-container>
                                                            <!-- Color Column -->
                    <ng-container matColumnDef="Acciones">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Acciones</th>
                      <td mat-cell *matCellDef="let row" > <a (click)="verPostuSel(row.consecutivo_postulacion, row.estado_postulacion, row ,templateverpostulacion)" data-title="Ver postulación"><i class="icofont-attachment iconSearchUser"></i></a> </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                    <!-- Row shown when there is no matching data. -->
                    <tr class="mat-row" *matNoDataRow>
                      <td class="mat-cell" colspan="4">No hay datos que coincidan con lo digitado</td>
                    </tr>
                  </table>
                  <mat-paginator [pageSizeOptions]="[5, 10, 20, 50, 100]"></mat-paginator>
                  </div>
                  </div>
                </div>

              </div>
            </div>
          </div>