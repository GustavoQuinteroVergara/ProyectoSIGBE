<app-navbar></app-navbar>
<div class="containerconvo">


  <ng-template #mytemplate>
    <div *ngIf="success" class="dialogSuccess">
      <i class="icofont-ui-check text-center iconSuccessRegister"></i>
      <h2 class="text-center textoSuccess">Se registró la convocatoria existosamente.</h2>
    </div>
    <div *ngIf="!success" class="dialogSuccess">
      <i class="icofont-close-circled text-center iconErrRegister"></i>
      <h2 class="text-center textoSuccess">Error al registrar convocatoria.</h2>
    </div>
  </ng-template>


  <div class="cuerpopage cup1" data-aos="fade-down" data-aos-once="true" >
    <form class="formtiq" [formGroup]="formularioConvocatoria" novalidate>
      <div class="row rowImageLogin">
        <h1>Crear una convocatoria</h1>
        <hr>
      </div>
      <div class="row">
        <div class="col s6">
          <mat-form-field appearance="fill" class="inputsEspacio">
            <mat-label>Seleccione una Beca</mat-label>
            <mat-select #beca required formControlName="beca">
              <mat-option>--</mat-option>
              <mat-option *ngFor="let beca of convocatoriaBeca" [value]="beca.consecutivo_beca">
                {{beca.descripcion}}
              </mat-option>
            </mat-select>
            <mat-error class="help-block form-error text-danger small" *ngIf="formularioConvocatoria.controls['beca'].hasError('required') &&
            formularioConvocatoria.controls['beca'].touched">Seleccionar una beca</mat-error>
          </mat-form-field>
        </div>
        <div class="col s6">
          <mat-form-field class="estadoConvo" appearance="fill" class="inputsEspacio">
            <mat-label>Seleccione el estado</mat-label>
            <mat-select #estadoconvocatoria required formControlName="estadoConvocatoria">
              <mat-option>--</mat-option>
              <mat-option value="Activo">Activo</mat-option>
              <mat-option value="Inactivo">Inactivo</mat-option>
            </mat-select>
            <mat-error class="help-block form-error text-danger small" *ngIf="formularioConvocatoria.controls['estadoConvocatoria'].hasError('required') &&
            formularioConvocatoria.controls['estadoConvocatoria'].touched">Selecciona un estado</mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col s6">
          <mat-form-field class="example-full-width" appearance="fill" class="inputsEspacio">
            <mat-label>Cantidad de Cupos</mat-label>
            <input #cupos id="cupos" matInput placeholder="cupos" value="" pattern="^[0-9]+" formControlName="cupos">
            <mat-error class="help-block form-error text-danger small"
            *ngIf="formularioConvocatoria.controls['cupos'].hasError('required') && formularioConvocatoria.controls['cupos'].touched">
          Los cupos son requeridos </mat-error>
          <mat-error class="help-block form-error text-danger small"
          *ngIf="formularioConvocatoria.controls['cupos'].hasError('pattern') && formularioConvocatoria.controls['cupos'].touched">
        Solo números positivos</mat-error>
      </mat-form-field>
    </div>
    <div class="col s6">
      <mat-form-field class="example-full-width" appearance="fill" class="inputsEspacio">
        <mat-label>Periodo Actual</mat-label>
        <input disabled matInput placeholder="consecutivo" [value]="convocatoriaPeriodo[0].descripcion">
      </mat-form-field>
    </div>
  </div>


  <div class="row">
    <div class="col s6">
      <mat-form-field appearance="fill" class="inputsEspacio">
        <input #fechainicial matInput [ngxMatDatetimePicker]="picker" [min]="minDate"
        placeholder="Fecha Inicial" [formControl]="dateControl" [disabled]="disabled">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>

        <ngx-mat-datetime-picker #picker [showSpinners]="showSpinners" [showSeconds]="showSeconds"
        [stepHour]="stepHour" [stepMinute]="stepMinute" [stepSecond]="stepSecond" [touchUi]="touchUi"
        [color]="color" [enableMeridian]="enableMeridian">
      </ngx-mat-datetime-picker>
    </mat-form-field>
  </div>
  <div class="col s6">
    <mat-form-field appearance="fill" class="inputsEspacio">
      <input #fechafinal matInput [ngxMatDatetimePicker]="picker2" [min]="minDate"
      placeholder="Fecha final" [formControl]="dateControl" [disabled]="disabled">
      <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>

      <ngx-mat-datetime-picker #picker2 [showSpinners]="showSpinners" [showSeconds]="showSeconds"
      [stepHour]="stepHour" [stepMinute]="stepMinute" [stepSecond]="stepSecond" [touchUi]="touchUi"
      [color]="color" [enableMeridian]="enableMeridian">
    </ngx-mat-datetime-picker>
  </mat-form-field>
</div>



</div>
<!--Checkbox-->
<section class="example-section">
  
  <div class="tarjetaCheck row">
  <h1>Seleccione los documentos que desea solicitar</h1>
  <div class="col s6">
  <mat-checkbox #documentoidenti (change)="setAllDocumentoEstudiante($event.checked)" [(ngModel)]="documentoest" class="example-margin">Fotocopia C.C estudiante</mat-checkbox>
  <mat-checkbox #documentoacudiente (change)="documentoAcudiente($event.checked)" [(ngModel)]="documentoacu" class="example-margin">Fotocopia C.C acudiente</mat-checkbox>
  <mat-checkbox #recibomatricula (change)="pagoMat($event.checked)" [(ngModel)]="pagomatricula"class="example-margin"> Fotocopia recibo pago matricula</mat-checkbox>
  <mat-checkbox #factserv  (change)="reciboPublico($event.checked)" [(ngModel)]="facturaserv" class="example-margin">Fotocopia recibo servicio público</mat-checkbox>
  <mat-checkbox #tabulado (change)="documentoTabulado($event.checked)" [(ngModel)]="tab" class="example-margin">Fotocopia Tabulado</mat-checkbox>
  <mat-checkbox #certificadoingresos  (change)="ingresosRetenciones($event.checked)" [(ngModel)]="certingresos" class="example-margin">Certificado ingresos y retenciones</mat-checkbox>
  <mat-checkbox #formatosolicitud (change)="soliSubsidio($event.checked)" [(ngModel)]="formsolicitud" class="example-margin">Solicitud de subsidio y apoyoeconómico</mat-checkbox>
  <mat-checkbox #cartapeti (change)="soliBecaAlimentacion($event.checked)" [(ngModel)]="carta" class="example-margin">Solicitud beca alimentación</mat-checkbox>
</div>
  <div class="col s6">
  <mat-checkbox #certificadovencidad (change)="declaracionVecindad($event.checked)" [(ngModel)]="vecindad" class="example-margin">Declaración juramentada de vecindad</mat-checkbox>
  <mat-checkbox #constanciaweb (change)="constaciaWeb($event.checked)" [(ngModel)]="constancia" class="example-margin">Constacia solicitud vía web</mat-checkbox>
  <mat-checkbox #promedio (change)="promAcumulado($event.checked)" [(ngModel)]="promacumulado" class="example-margin">Promedio académico acumulado</mat-checkbox>
  <mat-checkbox #diagnostico (change)="diagnosticoMedico($event.checked)" [(ngModel)]="diagnosticomed" class="example-margin">Fotocopia diagnostico médico</mat-checkbox>
  <mat-checkbox #d10  (change)="documentoD10($event.checked)" [(ngModel)]="formatod10" class="example-margin">Formato D10</mat-checkbox>  
  <mat-checkbox #cedulapadre (change)="documentoPadre($event.checked)" [(ngModel)]="documentopadre" class="example-margin">Fotocopia cédula padre</mat-checkbox>
  <mat-checkbox #cedulamadre (change)="documentoMadre($event.checked)" [(ngModel)]="documentomadre" class="example-margin">Fotocopia cédula madre</mat-checkbox>
  <mat-checkbox #carnetest (change)="carnetEstudiantil($event.checked)" [(ngModel)]="carnet" class="example-margin">Carnet Estudiante</mat-checkbox>
</div>
</div>
<br>
</section>
<!--Fin checkbox-->
<div class="row mb-10">
  <!-- Correo enviar -->
  <div class="col s12">
    <mat-checkbox (change)="setAll($event.checked)" [(ngModel)]="opcion">¿Desea enviar correo electrónico?</mat-checkbox>
  </div>
</div>
<div class="row" [hidden]="!opcion">
  <div class="col-12">
    <mat-form-field class="example-full-width" appearance="fill" class="inputsEspacio" style="width: 100%;">
      <mat-label>Asunto del correo</mat-label>
      <input #asuntocorreo matInput placeholder="Asunto">
    </mat-form-field>
  </div>
  <div class="col-12">
    <mat-form-field class="example-full-width" appearance="fill" class="inputsEspacio" style="width: 100%;">
      <mat-label>Contenido del correo</mat-label>
      <textarea #contenidocorreo matInput placeholder="Contenido" ></textarea>
    </mat-form-field>
  </div>
</div>
<br>
<div class="center-align">
  <a mat-raised-button color="primary" (click)="registrarConvocatoria(fechainicial.value,fechafinal.value,
  beca.value,cupos.value,estadoconvocatoria.value,asuntocorreo.value,contenidocorreo.value, 
  d10.value,factserv.value,cartapeti.value, carnetest.value, cedulapadre.value,cedulamadre.value, 
  promedio.value,tabulado.value,constanciaweb.value,certificadovencidad.value,documentoidenti.value
  ,documentoacudiente.value,formatosolicitud.value,diagnostico.value,recibomatricula.value,certificadoingresos.value, mytemplate)"name="action">Registrar</a>
</div>
</form>
</div>
</div>