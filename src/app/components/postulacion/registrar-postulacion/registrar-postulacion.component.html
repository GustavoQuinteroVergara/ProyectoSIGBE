<app-navbar></app-navbar>
<div class="containerRegisterPostu">
 <ng-template #mytemplate>
    <div *ngIf="success" class="dialogSuccess" >
        <i class="icofont-ui-check text-center iconSuccessRegister"></i>
        <h2 class="text-center textoSuccess">Registrado exitosamente</h2>
    </div>   
    <div *ngIf="!success" class="dialogSuccess" >
        <i class="icofont-close-circled text-center iconErrRegister"></i>
        <h2 class="text-center textoSuccess">Error al registrarse</h2>
    </div>       
</ng-template>
 <ng-template #errorpostuexistente>
    <div *ngIf="!success" class="dialogSuccess" >
        <i class="icofont-close-circled text-center iconErrRegister"></i>
        <h2 class="text-center textoSuccess">Error al registrarse,ya has registrado una postulación de esta convocatoria</h2>
    </div>       
</ng-template>

<div class="cuerpopage cup1" data-aos="fade-down" data-aos-once="true">
    <form [formGroup]="myForm" class="col s12 formtiq" novalidate>
        <div class="row text-center rowImageLogin">
         <h1>Postularse a una convocatoria</h1>
     </div>

     <div class="row">
        <div class="row">
        <div class="input-field col s12">
            <h4>Selecciona una convocatoria</h4>
            <mat-form-field appearance="fill">
              <mat-select #convo required formControlName="convo" (selectionChange)="cambiarConvo($event.value)">
                <mat-option>-- Selecciona una Convocatoria --</mat-option>
                <mat-option *ngFor="let convos of convoActivas" [value]="convos" >
                {{convos.beca}}</mat-option>
            </mat-select>
            <mat-label> <b> Convocatoria</b></mat-label>
        </mat-form-field>
        <div *ngIf="myForm.get('convo').errors && myForm.get('convo').dirty">
            <p class="red-text" *ngIf="myForm.get('convo').hasError('required')">Por favor, no dejar el campo convocatoria vacio.</p>
        </div>
    </div>
<!-- fin estrato -->

<div class="input-field col s6">
    <h4>Selecciona tú semestre</h4>
    <mat-form-field appearance="fill">
      <mat-select #semestre required formControlName="semestre">
        <mat-option>-- Selecciona el semestre cursando --</mat-option>
        <mat-option value="1">1</mat-option>
        <mat-option value="2">2</mat-option>
        <mat-option value="3">3</mat-option>
        <mat-option value="4">4</mat-option>
        <mat-option value="5">5</mat-option>
        <mat-option value="6">6</mat-option>
        <mat-option value="7">7</mat-option>
        <mat-option value="8">8</mat-option>
        <mat-option value="9">9</mat-option>
        <mat-option value="10">10</mat-option>

    </mat-select>
    <mat-label><i class="icofont-calendar icoselectCalendar"></i> <b> Semestre</b> </mat-label>
</mat-form-field>
<div *ngIf="myForm.get('semestre').errors && myForm.get('semestre').dirty">
    <p class="red-text" *ngIf="myForm.get('semestre').hasError('required')">Por favor, no dejar el campo convocatoria vacio.</p>
</div>
</div>
</div>
<div class="row">

<!-- PROMEDIO -->
<div class="input-field col s6">
    <h4>Selecciona tu promedio acumulado</h4>
    

    <mat-form-field appearance="fill">
      <mat-select #promedio required formControlName="promedio">
        <mat-option>-- Selecciona tu promedio acumulado --</mat-option>
        <mat-option value="2">2</mat-option>
        <mat-option value="2,1">2,1</mat-option>
        <mat-option value="2,2">2,2</mat-option>
        <mat-option value="2,3">2,3</mat-option>
        <mat-option value="2,4">2,4</mat-option>
        <mat-option value="2,5">2,5</mat-option>
        <mat-option value="2,6">2,6</mat-option>
        <mat-option value="2,7">2,7</mat-option>
        <mat-option value="2,8">2,8</mat-option>
        <mat-option value="2,9">2,9</mat-option>
        <mat-option value="3">3</mat-option>
        <mat-option value="3,1">3,1</mat-option>
        <mat-option value="3,2">3,2</mat-option>
        <mat-option value="3,3">3,3</mat-option>
        <mat-option value="3,4">3,4</mat-option>
        <mat-option value="3,5">3,5</mat-option>
        <mat-option value="3,6">3,6</mat-option>
        <mat-option value="3,7">3,7</mat-option>
        <mat-option value="3,8">3,8</mat-option>
        <mat-option value="3,9">3,9</mat-option>
        <mat-option value="4">4</mat-option>
        <mat-option value="4,1">4,1</mat-option>
        <mat-option value="4,2">4,2</mat-option>
        <mat-option value="4,3">4,3</mat-option>
        <mat-option value="4,4">4,4</mat-option>
        <mat-option value="4,5">4,5</mat-option>
        <mat-option value="4,6">4,6</mat-option>
        <mat-option value="4,7">4,7</mat-option>
        <mat-option value="4,8">4,8</mat-option>
        <mat-option value="4,9">4,9</mat-option>
        <mat-option value="5">5</mat-option>

    </mat-select>
    <mat-label><i class="icofont-calendar icoselectCalendar"></i> <b> Promedio acumulado</b> </mat-label>
</mat-form-field>
  <div *ngIf="myForm.get('promedio').errors && myForm.get('promedio').dirty">
    <p class="red-text" *ngIf="myForm.get('promedio').hasError('required')">Por favor, no dejar el campo convocatoria vacio.</p>
    <p class="red-text" *ngIf="myForm.get('promedio').hasError('minlength')">Minimo 1 caracter</p>
    <p class="red-text" *ngIf="myForm.get('promedio').hasError('maxlength')">Maximo 3 caracteres</p>
</div>
</div>
<!-- FIN PROMEDIO -->
<div class="input-field col s6">
    <h4>Verifica tu numero de identificación</h4>
    <mat-form-field appearance="fill">
      <mat-label>Identificacion</mat-label>
      <input matInput #identificacion id="icon_prefix" style="font-weight: 600;" value="{{this.$nombreusuario.identi}}" disabled="true" readonly type="text" class="validate inputidenuser">
  </mat-form-field>
</div>
</div>
<!-- SUBIR DOCUMENTOS -->
    <div class="row">
        <hr>
        <h1>Documentos solicitados</h1>
        <hr>
     <div class="col s6" *ngIf="convosel.documentoestudiante">
        <h4>Fotocopia C.C estudiante</h4>
          <input #documentoestudiante formControlName="documentoestudiante" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'documentoestudiante')">
        </div>
       <div class="col s6" *ngIf="convosel.documentoacudiente">
        <h4>Fotocopia C.C acudiente</h4>
          <input #documentoacudiente formControlName="documentoacudiente" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'documentoacudiente')">
        </div>
        <div class="col s6" *ngIf="convosel.recibopagomatricula">
            <h4>Fotocopia recibo pago matricula</h4>
          <input #recibopagomatricula formControlName="recibopagomatricula" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'recibopagomatricula')">
        </div>
    <div class="col s6" *ngIf="convosel.factservicio">
                <h4>Fotocopia recibo servicio público</h4>
          <input #factservicio formControlName="factservicio" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'factservicio')">
        </div>
        <div class="col s6" *ngIf="convosel.tabulado">
        <h4>Fotocopia Tabulado</h4>            
          <input #tabulado formControlName="tabulado" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'tabulado')">
        </div>
        
         <div class="col s6" *ngIf="convosel.certificadoingresos">
            <h4>Certificado ingresos y retenciones</h4>
          <input #certificadoingresos formControlName="certificadoingresos" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'certificadoingresos')">
        </div>
            <div class="col s6" *ngIf="convosel.formatosolicitudbeneficio">
            <h4>Formato de solicitud de beca</h4>
          <input #formatosolicitudbeneficio formControlName="formatosolicitudbeneficio" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'formatosolicitudbeneficio')">
        </div>
            <div class="col s6" *ngIf="convosel.cartapeticion">
                <h4>Carta de solicitud de beneficio</h4>
          <input #cartapeticion formControlName="cartapeticion" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'cartapeticion')">
        </div>
            <div class="col s6" *ngIf="convosel.certificadovencidad">
                <h4>Declaración juramentada de vecindad</h4>
          <input #certificadovencidad formControlName="certificadovencidad" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'certificadovencidad')">
        </div>
            <div class="col s6" *ngIf="convosel.constanciaweb">
                <h4>Constacia solicitud vía web</h4>
          <input #constanciaweb formControlName="constanciaweb" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'constanciaweb')">
        </div>
            <div class="col s6" *ngIf="convosel.promedioacumulado">
                <h4>Promedio académico acumulado</h4>
          <input #promedioacumulado formControlName="promedioacumulado" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'promedioacumulado')">
        </div>
            <div class="col-6" *ngIf="convosel.diagnosticomedico">
                <h4>Fotocopia diagnostico médico</h4>
          <input #diagnosticomedico formControlName="pdiagnosticomedicodf" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'diagnosticomedico')">
        </div>
            <div class="col s6" *ngIf="convosel.d10">
                <h4>Formato D10</h4>
          <input #d10 formControlName="d10" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'d10')">
        </div>
            <div class="col s6" *ngIf="convosel.cedulapadre">
                <h4>Fotocopia cédula padre</h4>
          <input #cedulapadre formControlName="cedulapadre" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'cedulapadre')">
        </div>
            <div class="col s6" *ngIf="convosel.cedulamadre">
                <h4>Fotocopia cédula madre</h4>
          <input #cedulamadre formControlName="cedulamadre" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'cedulamadre')">
        </div>
        <div class="col s6" *ngIf="convosel.carnetestudiante">
            <h4>Carnet Estudiante</h4>
          <input #carnetestudiante formControlName="carnetestudiante" type="file" accept="application/pdf" (change)="seleccionarArchivo($event,'carnetestudiante')">
        </div> 

    <!-- FIN SUBIR DOCUMENTOS -->
    </div>
</div>



<div class="row center mt-4">
    <div class="input-field col s12 text-center">
        <button (click)="registrarPostulacion(promedio.value,semestre.value,identificacion.value,convo.value,mytemplate,errorpostuexistente)" mat-raised-button color="primary" ><i class="icofont-save left"></i> <span class="buttontext">Registrar Postulacion</span></button>
    </div>
</div>
</form>
</div>
</div>